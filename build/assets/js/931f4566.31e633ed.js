"use strict";(self.webpackChunkbuildflow_docs=self.webpackChunkbuildflow_docs||[]).push([[657],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,f=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3227:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:5},i="Schema Validation",l={unversionedId:"schema-validation",id:"schema-validation",title:"Schema Validation",description:"BuildFlow uses python type hits and dataclasses to ensure that that output of your Processor matches the schema defintion of your sink (for supported sinks). This can be useful for catching schema mis-match errors before you launch your application.",source:"@site/docs/schema-validation.md",sourceDirName:".",slug:"/schema-validation",permalink:"/docs/schema-validation",draft:!1,editUrl:"https://github.com/launchflow/buildflow-docs/tree/main/docs/schema-validation.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5}},s={},p=[{value:"Supported Types:",id:"supported-types",level:2},{value:"Examples",id:"examples",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"schema-validation"},"Schema Validation"),(0,r.kt)("p",null,"BuildFlow uses python type hits and dataclasses to ensure that that output of your Processor matches the schema defintion of your sink (for supported sinks). This can be useful for catching schema mis-match errors before you launch your application."),(0,r.kt)("h2",{id:"supported-types"},"Supported Types:"),(0,r.kt)("p",null,"Currently we support the following types:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"All python primitive types"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"datetime.datetime")," -> TIMESTAMP"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"datetime.date")," -> DATE"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"datetime.time")," -> TIME"),(0,r.kt)("li",{parentName:"ul"},"List","[...]"," -> Repeated"),(0,r.kt)("li",{parentName:"ul"},"Optional","[...]"," -> Nullable")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"In the below example we define a dataclass ",(0,r.kt)("inlineCode",{parentName:"p"},"MySchema")," and use type hints to tell BuildFlow what our processor is returning. Before your application launches, BuildFlow will validate that the dataclass definition matches the schema of your output BigQuery table, and if the table doens't exist, BuildFlow will create it for you!"),(0,r.kt)("p",null,"The below example also highlights how you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"List")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Optional")," to specify whether your field is repeated or optional, and you can also nest dataclasses for a nested field."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"app = Node()\n\ninput_sub = PubSubSource(...)\noutput_table = BigQuerySink(...)\n\n@dataclass\nclass NestedSchema:\n    nested_field: float\n\n@dataclass\nclass MySchema:\n    num_field: int\n    optional_field: Optional[str]\n    repeated_field: List[str]\n    nested_field: NestedSchema\n\n@app.processor(source=input_sub, sink=output_table)\ndef process(element: Dict[str, Any]) -> MySchema:\n    return element\n")))}d.isMDXComponent=!0}}]);