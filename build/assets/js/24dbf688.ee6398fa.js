"use strict";(self.webpackChunkbuildflow_docs=self.webpackChunkbuildflow_docs||[]).push([[990],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(r),f=o,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||a;return r?n.createElement(m,i(i({ref:t},u),{},{components:r})):n.createElement(m,i({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=f;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},9876:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var n=r(7462),o=(r(7294),r(3905));const a={},i="Resource Creation",l={unversionedId:"features/resource-creation",id:"features/resource-creation",title:"Resource Creation",description:"TODO Infrastructure from Code",source:"@site/docs/features/resource-creation.md",sourceDirName:"features",slug:"/features/resource-creation",permalink:"/docs/features/resource-creation",draft:!1,editUrl:"https://github.com/launchflow/buildflow-docs/tree/main/docs/features/resource-creation.md",tags:[],version:"current",frontMatter:{},sidebar:"mainSidebar",previous:{title:"Parallelism & Concurrency",permalink:"/docs/features/parallelism"},next:{title:"Schema Validation",permalink:"/docs/features/schema-validation"}},s={},c=[{value:"TODO: Update this. Maybe name it: Infrastructure from Code",id:"todo-update-this-maybe-name-it-infrastructure-from-code",level:2},{value:"How it works",id:"how-it-works",level:2},{value:"Example",id:"example",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...r}=e;return(0,o.kt)(p,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"resource-creation"},"Resource Creation"),(0,o.kt)("h2",{id:"todo-update-this-maybe-name-it-infrastructure-from-code"},"TODO: Update this. Maybe name it: Infrastructure from Code"),(0,o.kt)("p",null,"BuildFlow helps eliminate operational work by including an (optional) resource creation / management module. For most use cases, this can eliminate the need for a separate deployment tool like Terraform."),(0,o.kt)("h2",{id:"how-it-works"},"How it works"),(0,o.kt)("p",null,"When your app is launched, BuildFlow will automatically create (if they don't exist) any resources that your Processor depends on and will ensure that everything is set up correctly (authentication checks, schema diff checks, etc..)"),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"In the below example we are reading from a pubsub topic and writing to a bigquery table. When you launch your application for the first time. If the Pub/Sub subscription doesn't exist, BuildFlow will create it and point it at the correct topic. If it does exist, BuildFlow will validate that you are allowed to read from the subscription."),(0,o.kt)("p",null,"For the sink, BuildFlow will check if the table exists. If it doesn't, BuildFlow will create it with a schema that matches your output's type as defined by python type hints. If it does exist, BuildFlow will ensure your output type matches the table's schema and will validate that you have access to write to the table. You can find more information about schema validation ",(0,o.kt)("a",{parentName:"p",href:"schema-validation"},"here"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"app = Node()\n\ninput_sub = PubSubSource(\n    subscription='projects/myproj/subscriptions/mysub',\n    topic='projects/myproject/topics/mypub',\n)\noutput_table = buildflow.BigQuerySink(table_id='p.d.t')\n\n@dataclass\nclass NestedSchema:\n    nested_field: float\n\n@dataclass\nclass MySchema:\n    num_field: int\n    optional_field: Optional[str]\n    repeated_field: List[str]\n    nested_field: float\n\n@app.processor(source=input_sub, sink=output_table)\ndef process(element: Dict[str, Any]) -> MySchema:\n    return element\n")))}d.isMDXComponent=!0}}]);