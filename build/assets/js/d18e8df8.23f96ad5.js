"use strict";(self.webpackChunkbuildflow_docs=self.webpackChunkbuildflow_docs||[]).push([[5697],{3905:(e,t,i)=>{i.d(t,{Zo:()=>u,kt:()=>f});var n=i(7294);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var l=n.createContext({}),s=function(e){var t=n.useContext(l),i=t;return e&&(i="function"==typeof e?e(t):a(a({},t),e)),i},u=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var i=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(i),d=r,f=c["".concat(l,".").concat(d)]||c[d]||m[d]||o;return i?n.createElement(f,a(a({ref:t},u),{},{components:i})):n.createElement(f,a({ref:t},u))}));function f(e,t){var i=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=i.length,a=new Array(o);a[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[c]="string"==typeof e?e:r,a[1]=p;for(var s=2;s<o;s++)a[s]=i[s];return n.createElement.apply(null,a)}return n.createElement.apply(null,i)}d.displayName="MDXCreateElement"},3569:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>s});var n=i(7462),r=(i(7294),i(3905));const o={},a="Pipelines",p={unversionedId:"user-guides/pipelines/overview",id:"user-guides/pipelines/overview",title:"Pipelines",description:"The Pipeline is the pattern provided by BuildFlow for creating a real-time pipeline. It contains all of the user's processing logic between a source and a sink.",source:"@site/docs/user-guides/pipelines/overview.md",sourceDirName:"user-guides/pipelines",slug:"/user-guides/pipelines/overview",permalink:"/docs/user-guides/pipelines/overview",draft:!1,editUrl:"https://github.com/launchflow/buildflow-docs/tree/main/docs/user-guides/pipelines/overview.md",tags:[],version:"current",frontMatter:{},sidebar:"mainSidebar",previous:{title:"Autoscaling Options",permalink:"/docs/user-guides/processors/auto-scaling-options"},next:{title:"Pipeline Options",permalink:"/docs/user-guides/pipelines/pipeline-options"}},l={},s=[{value:"Multi-Row Output",id:"multi-row-output",level:2}],u={toc:s},c="wrapper";function m(e){let{components:t,...i}=e;return(0,r.kt)(c,(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"pipelines"},"Pipelines"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"Pipeline")," is the pattern provided by ",(0,r.kt)("strong",{parentName:"p"},"BuildFlow")," for creating a real-time pipeline. It contains all of the user's processing logic between a source and a sink."),(0,r.kt)("p",null,"A pipeline is composed of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("inlineCode",{parentName:"li"},"source")," ",(0,r.kt)("a",{parentName:"li",href:"../primitives/overview"},"primitive")),(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("inlineCode",{parentName:"li"},"sink")," ",(0,r.kt)("a",{parentName:"li",href:"../primitives/overview"},"primitive")),(0,r.kt)("li",{parentName:"ul"},"Your processing logic")),(0,r.kt)("p",null,"Pipelines can easily be created with the ",(0,r.kt)("inlineCode",{parentName:"p"},"pipeline")," decorator method of the ",(0,r.kt)("a",{parentName:"p",href:"../flows/overview"},(0,r.kt)("inlineCode",{parentName:"a"},"Flow"))," class."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"\n@app.pipeline(source=Primitive(...), sink=Primitive(...))\ndef my_pipeline(...):\n    ...\n\n")),(0,r.kt)("p",null,"The input of your pipeline will be one element that is read from your ",(0,r.kt)("inlineCode",{parentName:"p"},"source")," primitive. For instance if your source type is a queue (like Kafka, GCP Pub/Sub, or AWS SQS) then your processor will receive one message at a time that is read from the queue."),(0,r.kt)("p",null,"The element you return from your pipeline will be written to your ",(0,r.kt)("inlineCode",{parentName:"p"},"sink")," primitive. For instance if your sink type is an OLAP datastore (like GCP BigQuery or Snowflake) one row will be written for each element you return from your processor. Or if you sink is a queue (like Kafka, GCP Pub/Sub, or AWS SQS) then one message will be published for each element you return from your processor."),(0,r.kt)("h2",{id:"multi-row-output"},"Multi-Row Output"),(0,r.kt)("p",null,"BuildFlow also supports pipelines that return multiple rows. To accomplish this you can either return a ",(0,r.kt)("inlineCode",{parentName:"p"},"List")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Tuple")," and BuildFlow will flatten each element into it's own row."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"@app.pipeline(source=Primitive(...), sink=Primitive(...))\ndef my_pipeline(message):\n    return [output(message), output1(message), output2(message)]\n\n")),(0,r.kt)("p",null,"You can also use yields to return multiple elements that should be written to your sink."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'@app.pipeline(source=Primitive(...), sink=Primitive(...))\ndef my_pipeline(message):\n    if message.startswith("hello"):\n        yield "world"\n    if message.endswith("world"):\n        yield "!"\n\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you want your row to be a list you can wrap it in a ",(0,r.kt)("inlineCode",{parentName:"p"},"Tuple")," to avoid flattening."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"@app.pipeline(source=Primitive(...), sink=Primitive(...))\ndef my_pipeline(message):\n    return [[output(message), output1(message), output2(message)]]\n"))))}m.isMDXComponent=!0}}]);