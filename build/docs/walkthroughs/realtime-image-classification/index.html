<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-walkthroughs/realtime-image-classification">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Real-Time Image Classification | BuildFlow</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:image" content="https://www.buildflow.dev/img/hammer.png"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:image" content="https://www.buildflow.dev/img/hammer.png"><meta data-rh="true" property="og:url" content="https://www.buildflow.dev"><meta data-rh="true" property="og:site_name" content="BuildFlow"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Real-Time Image Classification | BuildFlow"><meta data-rh="true" name="description" content="You can follow the same walkthrough using VS Code and LaunchFlow cloud here."><meta data-rh="true" property="og:description" content="You can follow the same walkthrough using VS Code and LaunchFlow cloud here."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.buildflow.dev/docs/walkthroughs/realtime-image-classification"><link data-rh="true" rel="alternate" href="https://www.buildflow.dev/docs/walkthroughs/realtime-image-classification" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.buildflow.dev/docs/walkthroughs/realtime-image-classification" hreflang="x-default"><link rel="preconnect" href="https://va.vercel-scripts.com">
<script src="https://va.vercel-scripts.com/v1/script.js" defer="defer" data-sdkn="@vercel/analytics" data-sdkv="1.0.1"></script><link rel="stylesheet" href="/assets/css/styles.09054ff4.css">
<link rel="preload" href="/assets/js/runtime~main.978df410.js" as="script">
<link rel="preload" href="/assets/js/main.2fe49204.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/hammer.png" alt="BuildFlow Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/hammer.png" alt="BuildFlow Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">BuildFlow</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/install">Get Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/developers/contribute">Contribute</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/launchflow/buildflow/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discordapp.com/invite/wz7fjHyrCA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">BuildFlow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/overview">What is BuildFlow?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><hr>Programming Guide</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/install">Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/key-concepts">Key Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/user-guides">User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/examples">Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><hr>Walkthroughs</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/walkthroughs/realtime-image-classification">Real-Time Image Classification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><hr>Reference</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/primitives">Primitives</a><button aria-label="Toggle the collapsible sidebar category &#x27;Primitives&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/api">API</a><button aria-label="Toggle the collapsible sidebar category &#x27;API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/reference/cli/run">CLI</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><hr>Features</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/features/autoscaling">Dynamic Autoscaling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/features/parallelism">Parallelism &amp; Concurrency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/features/infrastructure-from-code">Infrastructure from Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title"><hr>Developers</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/developers/contribute">Contribute</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Real-Time Image Classification</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Real-Time Image Classification</h1><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>You can follow the same walkthrough using VS Code and LaunchFlow cloud <a href="https://docs.launchflow.com/walkthroughs/file-ingestion" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div><p>In this walkthrough we will watch files as they are uploaded to cloud storage
and use <a href="https://github.com/OlafenwaMoses/ImageAI" target="_blank" rel="noopener noreferrer">ImageAI</a>
to classify what the image contains.</p><p>Before completing the walkthrough ensure you have <a href="/docs/install">installed BuildFlow</a>
with all <a href="/docs/install#extra-dependencies">extra dependencies</a>.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><p>All the code for this walkthrough can be found on <a href="https://github.com/launchflow/buildflow-gcp-image-classification" target="_blank" rel="noopener noreferrer">github</a></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>In order to run this code you will need to have a GCP project created that you have access to.</p><p>Follow the <a href="https://developers.google.com/workspace/guides/create-project" target="_blank" rel="noopener noreferrer">Google Cloud Walkthrough</a> to create a new one if you need to.</p></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>All the code for this walkthrough can be found on <a href="https://github.com/launchflow/buildflow-aws-image-classification" target="_blank" rel="noopener noreferrer">github</a></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>In order to run this code you will need to have a AWS and Snowflake account created that you have access to.</p><p>Follow the <a href="https://docs.aws.amazon.com/accounts/latest/reference/manage-acct-creating.html" target="_blank" rel="noopener noreferrer">AWS Walkthrough</a> to create a new one if you need to.</p><p>You can signup for a Snowflake trial account <a href="https://docs.snowflake.com/en/user-guide/admin-trial-account#signing-up-for-a-trial-account" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>All the code for this walkthrough can be found on <a href="https://github.com/launchflow/buildflow-local-image-classification" target="_blank" rel="noopener noreferrer">github</a></p></div></div></div><p>In this walkthrough we will:</p><ul><li>Setup your development enviornment</li><li>Clone the github repository</li><li>Walkthrough the code</li><li>Run locally</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clone-the-github-repository">Clone the GitHub repository<a href="#clone-the-github-repository" class="hash-link" aria-label="Direct link to Clone the GitHub repository" title="Direct link to Clone the GitHub repository">​</a></h3><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> clone git@github.com:launchflow/buildflow-gcp-image-classification.git </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token builtin class-name" style="color:#FAC863">cd</span><span class="token plain"> buildflow-gcp-image-classification</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> clone git@github.com:launchflow/buildflow-aws-image-classification.git </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token builtin class-name" style="color:#FAC863">cd</span><span class="token plain"> buildflow-aws-image-classification</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> clone git@github.com:launchflow/buildflow-local-image-classification.git </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token builtin class-name" style="color:#FAC863">cd</span><span class="token plain"> buildflow-local-image-classification</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-your-development-enviornment">Setup your development enviornment<a href="#setup-your-development-enviornment" class="hash-link" aria-label="Direct link to Setup your development enviornment" title="Direct link to Setup your development enviornment">​</a></h3><p>BuildFlow supports any python version &gt;=3.8. Ensure you have a recent
version of python installed with:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">python3 --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you don’t have a Python interpreter, you can download and install it from the
<a href="https://devguide.python.org/versions/" target="_blank" rel="noopener noreferrer">Python downloads page</a>.</p><p>Once you have an approriate python version installed we recommended using a python
virtual environment for all local development. This helps isolate the python dependencies
from this project from your system installation.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">python3 -m venv venv</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">source venv/bin/activate</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">pip install -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you are on Mac and use <code>pyenv</code> to manage your python installations / virtual environments
you will need to install <code>xz</code> to ensure the model dependencies will work.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">brew install xz</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">pyenv uninstall &lt;desired-python-version&gt;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">pyenv install &lt;desired-python-version&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-walkthrough">Code Walkthrough<a href="#code-walkthrough" class="hash-link" aria-label="Direct link to Code Walkthrough" title="Direct link to Code Walkthrough">​</a></h3><p>In this section we will walkthrough individual bits of the code to make sure
you understanding everything. You can go to the <a href="#create-your-resources">next section</a> if you want to jump right into running.</p><p>Overall our BuildFlow processor will:</p><ul><li>listen to image uploads to a bucket</li><li>run them through an image classification model</li><li>finally write the output to an analysis table</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="repository-structure">Repository Structure<a href="#repository-structure" class="hash-link" aria-label="Direct link to Repository Structure" title="Direct link to Repository Structure">​</a></h4><ul><li><strong>main.py</strong> - this is our main python file which contains all of our logic</li><li><strong>requirements.txt</strong> - defines all of the requirements for our code</li><li><strong>mobilenet_v2-b0353104.pth</strong> - the image classification model we will send the images through</li><li><strong>.env.template</strong> - template file that can be copied to <code>.env</code> and filled in with your values</li><li><strong>image_upload.py</strong> - script for &quot;uploading&quot; images to trigger processing</li><li><strong>founders_dog.jpg</strong> - example image of one of our founders dogs</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-environment-variables">Set Environment Variables<a href="#set-environment-variables" class="hash-link" aria-label="Direct link to Set Environment Variables" title="Direct link to Set Environment Variables">​</a></h4><p>Before we walkthrough the code there are a couple environment variables you will need to set to ensure the pipeline points at your resources.</p><p>We use a <code>.env</code> file to store these variables. A template <code>.env.template</code> is provided in the repository. Copy this file to <code>.env</code> and fill in the values.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token function" style="color:#79b6f2">cp</span><span class="token plain"> .env.template .env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><p>You can set <code>GCP_PROJECT</code> to the GCP project you plan to use.<code>BUCKET_NAME</code> can be any unique string. BuildFlow will handle creating and resources and setting up all the wiring to ensure your pipeline can listen to file uploads to this bucket and GCP project.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p><code>GCP_SERVICE_ACCOUNT_INFO</code> can be removed if you do not wish to provide custom credentials. If removed we will fall back to the <a href="https://cloud.google.com/docs/authentication/application-default-credentials" target="_blank" rel="noopener noreferrer">default credentials</a> in your environment.</p></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">GCP_PROJECT_NAME </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">BUCKET_NAME </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token comment" style="color:#999999"># NOTE: This only needs to be set if you would like to provide custom credentials</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token comment" style="color:#999999"># Otherwise it can be deleted.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">GCP_SERVICE_ACCOUNT_INFO </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> TODO</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>The following environment variables need to be set:</p><ul><li><b>INPUT_BUCKET</b>: the bucket files will be uploaded/downloaded from</li><li><b>SNOWFLAKE_BUCKET_NAME</b>: the bucket our output will be staged at before writing to snowflake</li><li><b>SNOWFLAKE_ACCOUNT</b>: the snowflake account for where to upload data to</li><li><b>SNOWFLAKE_USER</b>: the snowflake username to authenticate as</li><li><b>SNOWFLAKE_PRIVATE_KEY_FILE</b>: the private key file to user for authnetication with snowflake, <a href="https://docs.snowflake.com/en/user-guide/key-pair-auth" target="_blank" rel="noopener noreferrer">follow these steps to create one.</a></li><li><b>AWS_ACCESS_KEY_ID</b>: AWS access key ID. this is required for snowflake to be able to read from the bucket</li><li><b>AWS_SECRET_ACCESS_KEY</b>: AWS secret access key for an AWS IAM user. this is required for snowflake to be able to read from the bucket</li></ul><p></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">INPUT_BUCKET_NAME</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">SNOWFLAKE_BUCKET_NAME</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">SNOWFLAKE_ACCOUNT</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">SNOWFLAKE_USER</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">SNOWFLAKE_PRIVATE_KEY_FILE</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">AWS_ACCESS_KEY_ID</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">TODO</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">AWS_SECRET_ACCESS_KEY</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">TODO</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>You can set <code>INPUT_FOLDER_NAME</code> to the folder you wish to listen to new files in. By default this points to a folder in the repository directory.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">INPUT_FOLDER_NAME</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">image_folder</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="code">Code<a href="#code" class="hash-link" aria-label="Direct link to Code" title="Direct link to Code">​</a></h4><p>First we import all necessary modules, and ensure our environment variables from our <code>.env</code> file are loaded.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> dataclasses</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> tempfile</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> List</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> dotenv</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> imageai</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Classification </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> ImageClassification</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Flow</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> FlowOptions</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gcp </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> GCSFileChangeStream</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> BigQueryTable</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> GCSBucket</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">types</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gcp </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> GCSFileChangeEvent</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">dotenv</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">load_dotenv</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> dataclasses</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> tempfile</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> List</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> dotenv</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> imageai</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Classification </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> ImageClassification</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Flow</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> FlowOptions</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">aws </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> S3FileChangeStream</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> S3Bucket</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">snowflake </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> SnowflakeTable</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> read_private_key_file</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">types</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">aws </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> S3FileChangeEvent</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> S3ChangeStreamEventType</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">dotenv</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">load_dotenv</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> dataclasses</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> List</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> dotenv</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> imageai</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Classification </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> ImageClassification</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Flow</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> FlowOptions</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">local </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> LocalFileChangeStream</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">duckdb </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> DuckDBTable</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> buildflow</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">types</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">local </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> LocalFileChangeEvent</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">dotenv</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">load_dotenv</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Next we define our output schema. Here we can use dataclasses to describe what the
schema of our analysis table will be. BuildFlow will take this schema and create
a new table.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>You can even nest dataclasses to get a nested structure in your table.</p></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token decorator annotation punctuation" style="color:#8dc891">@dataclasses</span><span class="token decorator annotation punctuation" style="color:#8dc891">.</span><span class="token decorator annotation punctuation" style="color:#8dc891">dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Classification</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    classification</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    confidence</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">float</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#8dc891">@dataclasses</span><span class="token decorator annotation punctuation" style="color:#8dc891">.</span><span class="token decorator annotation punctuation" style="color:#8dc891">dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">ImageClassificationRow</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    image_name</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    upload</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    classifications</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Classification</span><span class="token punctuation" style="color:#8dc891">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we create our Flow which is a container for our pipeline. We can add as many pipelines as we like, but will only use one for this walkthrough.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><p>Here we load in any custom service account credentials that were provided.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">app </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Flow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    flow_options</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">FlowOptions</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gcp_service_account_info</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;GCP_SERVICE_ACCOUNT_INFO&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>Here we load in the credentials that were provided.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">app </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Flow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    flow_options</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">FlowOptions</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        aws_access_key_id</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">AWS_ACCESS_KEY_ID</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> aws_secret_access_key</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">AWS_SECRET_ACCESS_KEY</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">app </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Flow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Then we define our BuildFlow pipeline, our source, and our sink. Here we are saying we want to receive file notifications for this bucket and output
them to our configured analysis table.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>We use a decorter on a class because we want to be able to setup state for our model.</p></div></div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><p>Our source is <a href="/docs/reference/primitives/gcp/gcs_file_change_stream">GCSFileChangeStream</a> and our sink is a <a href="/docs/reference/primitives/gcp/gcp_bigquery#bigquerytable)">BigQueryTable</a>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token decorator annotation punctuation" style="color:#8dc891">@app</span><span class="token decorator annotation punctuation" style="color:#8dc891">.</span><span class="token decorator annotation punctuation" style="color:#8dc891">pipeline</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    source</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">GCSFileChangeStream</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        gcs_bucket</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">GCSBucket</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            project_id</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">GCP_PROJECT_NAME</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            bucket_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">BUCKET_NAME</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">managed</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> force_destroy</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    sink</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">BigQueryTable</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        project_id</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">GCP_PROJECT_NAME</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        dataset_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;buildflow_walkthrough&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        table_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;image_classification&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">managed</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> destroy_protection</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">False</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">ImageClassificationProcessor</span><span class="token punctuation" style="color:#8dc891">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>Our source is <a href="/docs/reference/primitives/aws/s3_file_change_stream">S3FileChangeStream</a> and our sink is a <a href="/docs/reference/primitives/snowflake">SnowflakeTable</a>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token decorator annotation punctuation" style="color:#8dc891">@app</span><span class="token decorator annotation punctuation" style="color:#8dc891">.</span><span class="token decorator annotation punctuation" style="color:#8dc891">pipeline</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    source</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">S3FileChangeStream</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        s3_bucket</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">S3Bucket</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            bucket_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">INPUT_BUCKET_NAME</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            aws_region</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;us-east-1&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">managed</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> force_destroy</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    sink</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">SnowflakeTable</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        database</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;buildflow-walkthrough&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        schema</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;buildflow-schema&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        table</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;image_classification&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        account</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">SNOWFLAKE_ACCOUNT</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        user</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">SNOWFLAKE_USER</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        private_key</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">read_private_key_file</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">SNOWFLAKE_PRIVATE_KEY_FILE</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        bucket</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">S3Bucket</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            bucket_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">SNOWFLAKE_BUCKET_NAME</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            aws_region</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;us-east-1&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">managed</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> force_destroy</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">managed</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>Our source is <a href="/docs/reference/primitives/local/file_change_stream">LocalFileChangeStream</a> and our sink is a <a href="/docs/reference/primitives/duckdb">DuckDBTable</a>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token decorator annotation punctuation" style="color:#8dc891">@app</span><span class="token decorator annotation punctuation" style="color:#8dc891">.</span><span class="token decorator annotation punctuation" style="color:#8dc891">pipeline</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    source</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">LocalFileChangeStream</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">file_path</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;./image_folder&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    sink</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">DuckDBTable</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">database</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;buildflow.duckdb&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> table</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;image_classification&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>After our source and sink, we setup the state for our model. Here we use the BuildFlow
<a href="/docs/user-guides/processors/stateful-processors"><code>setup</code></a> method to load in our model.
This ensures we are only loading our model once for the lifetime of a replica.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">setup</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">execution_path </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">realpath</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">__file__</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">prediction </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> ImageClassification</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">prediction</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">setModelTypeAsMobileNetV2</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">prediction</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">setModelPath</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">execution_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;mobilenet_v2-b0353104.pth&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">prediction</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">loadModel</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally we define our process logic. This is the method that is actually called when
a new file is loaded to the bucket.</p><p>The logic is as follows:</p><ol><li>Load the blob from the event </li><li>Run the image through the model</li><li>Convert the model output into our output schema and return it</li></ol><p>The returned object will then be written to our output table.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">process</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        file_event</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> GCSFileChangeEvent</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> ImageClassificationRow</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> tempfile</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">TemporaryDirectory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> td</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            file_path </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">td</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token comment" style="color:#999999"># Download the bytes to a local file that can be sent through the model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">open</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;wb&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                f</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">blob</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            predictions</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probabilities </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">prediction</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">classifyImage</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> result_count</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        classifications </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> predicition</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probability </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">zip</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">predictions</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probabilities</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            classifications</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Classification</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">predicition</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probability</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        row </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> ImageClassificationRow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            image_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            upload</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utcnow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">isoformat</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            classifications</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">classifications</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">print</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> row</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">process</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        file_event</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> S3FileChangeEvent</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> ImageClassificationRow</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">event_type </span><span class="token keyword" style="color:#c5a5c5">not</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> S3ChangeStreamEventType</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">create_event_types</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token comment" style="color:#999999"># s3/sqs publishes a test notification when the notification is first created</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token comment" style="color:#999999"># we ignore that</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> tempfile</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">TemporaryDirectory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> td</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">not</span><span class="token plain"> os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">exists</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token comment" style="color:#999999"># Check if the path exists first, if we&#x27;re running locally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token comment" style="color:#999999"># we don&#x27;t need to download and write the file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                file_path </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">td</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">with</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">open</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;wb&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                    f</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">blob</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">else</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                file_path </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            predictions</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probabilities </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">prediction</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">classifyImage</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> result_count</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        classifications </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> predicition</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probability </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">zip</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">predictions</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probabilities</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            classifications</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Classification</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">predicition</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probability</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        row </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> ImageClassificationRow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            image_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            upload</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utcnow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">isoformat</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            classifications</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">classifications</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">print</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> row</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">process</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        file_event</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> LocalFileChangeEvent</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> ImageClassificationRow</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        predictions</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probabilities </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">prediction</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">classifyImage</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> result_count</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        classifications </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> predicition</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probability </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token builtin" style="color:#D8DEE9">zip</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">predictions</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probabilities</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            classifications</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Classification</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">predicition</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> probability</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        row </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> ImageClassificationRow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            image_name</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">file_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            upload</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utcnow</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">isoformat</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            classifications</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">classifications</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">print</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> row</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-resources">Create Your Resources<a href="#create-your-resources" class="hash-link" aria-label="Direct link to Create Your Resources" title="Direct link to Create Your Resources">​</a></h3><p>Before you can run your processor locally you will need to create all the resources that is uses. This includes:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><ul><li>GCS bucket</li><li>Pub/Sub topics and subscriptions</li><li>GCS notifications</li><li>BigQuery Table</li></ul></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><ul><li>S3 Bucket for uploading images</li><li>SQS Queue</li><li>S3 Notifications</li><li>SQS Queue Policy</li><li>Snowflake Database</li><li>Snowflake Schema</li><li>Snowflake Table</li><li>Snowflake Stage</li><li>Snowflake Pipe</li></ul></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden="">You can skip this step for local since no resources need to be created.</div></div></div><p>With BuildFlow this can all be done automtically without every having to visit the GCP cloud console.</p><p>To create your resources run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">buildflow apply main:app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will show you what resource it is going to create and ask you to confirm. If you are happy type <code>yes</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-buildflow-processor">Run BuildFlow Processor<a href="#run-buildflow-processor" class="hash-link" aria-label="Direct link to Run BuildFlow Processor" title="Direct link to Run BuildFlow Processor">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">buildflow run main:app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">GCP</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">AWS</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Local</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6 tab-content"><p>Once the pipeline is up and running you can run the provided script to upload images to the bucket and see output in BigQuery. Make sure to replace <code>BUCKET_NAME</code> with the name of the bucket and <code>GCP_PROJECT</code> with the GCP project used in your pipeline.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">python image_upload.py --bucket</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">BUCKET_NAME --project</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">GCP_PROJECT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>By default this uploads a photo of one of our contributors dogs. If you want to upload your own photo you can use the <code>--image</code> flag to specify a path to your own image.</p><p>If you updated the dataset or table you wrote to, you can provide the <code>--dataset-name</code> or <code>--table-name</code> flags to point the script at a different table.</p></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>Once the pipeline is up and running you can run the provided script to upload images to the bucket and see output in Snowflake. Make sure to replace <code>BUCKET_NAME</code> with the name of the bucket.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">python image_upload.py --bucket</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">BUCKET_NAME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>By default this uploads a photo of one of our contributors dogs. If you want to upload your own photo you can use the <code>--image</code> flag to specify a path to your own image.</p><p>If you updated the database, schema, or table you wrote to, you can provide <code>--database</code>, <code>--schema</code>, or <code>--table</code> flags to point the script at a different table.</p></div></div></div><div role="tabpanel" class="tabItem_Ymn6 tab-content" hidden=""><p>Once the pipeline is up and running you can run the provided script to copy images to the directory you are watching and have them written to your local DuckDB database.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">python image_upload.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>By default this copies a photo of one of our contributors dogs. If you want to upload your own photo you can use the <code>--image</code> flag to specify a path to your own image.</p><p>Also if you updated the folder, duckdb database, or table you wrote to, you can provide them with <code>--image-folder</code>, <code>--duckdb-database</code>, or <code>--duckdb-table</code> flags.</p></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clean-up-your-resources">Clean Up Your Resources<a href="#clean-up-your-resources" class="hash-link" aria-label="Direct link to Clean Up Your Resources" title="Direct link to Clean Up Your Resources">​</a></h3><p>Once you&#x27;re all done you can clean up all your resources with a single command.</p><p>To clean up your resources run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">buildflow destroy main:app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s Next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s Next?" title="Direct link to What&#x27;s Next?">​</a></h3><ul><li><a href="/docs/key-concepts">Learn more about BuildFlow Concepts</a></li><li><a href="https://docs.launchflow.com/vscode/overview" target="_blank" rel="noopener noreferrer">Use LaunchFlow to iterate directly in VSCode</a></li><li><a href="https://docs.launchflow.com/walkthroughs/file-ingestion#launch-a-launchflow-deployment" target="_blank" rel="noopener noreferrer">Use LaunchFlow to deploy your pipeline remotely</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/launchflow/buildflow-docs/tree/main/docs/walkthroughs/realtime-image-classification.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/examples"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Examples</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/primitives"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Primitives</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#clone-the-github-repository" class="table-of-contents__link toc-highlight">Clone the GitHub repository</a></li><li><a href="#setup-your-development-enviornment" class="table-of-contents__link toc-highlight">Setup your development enviornment</a></li><li><a href="#code-walkthrough" class="table-of-contents__link toc-highlight">Code Walkthrough</a></li><li><a href="#create-your-resources" class="table-of-contents__link toc-highlight">Create Your Resources</a></li><li><a href="#run-buildflow-processor" class="table-of-contents__link toc-highlight">Run BuildFlow Processor</a></li><li><a href="#clean-up-your-resources" class="table-of-contents__link toc-highlight">Clean Up Your Resources</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s Next?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">BuildFlow Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discordapp.com/invite/wz7fjHyrCA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/launchflow/buildflow/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.launchflow.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">LaunchFlow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.launchflow.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">LaunchFlow Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 BuildFlow</div></div></div></footer></div>
<script src="/assets/js/runtime~main.978df410.js"></script>
<script src="/assets/js/main.2fe49204.js"></script>
</body>
</html>